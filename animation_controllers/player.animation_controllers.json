{
  "format_version": "1.10.0",
  "animation_controllers": {
    "controller.animation.player.first_person_attack": {
      "initial_state": "default",
      "states": {
        "default": {
          "animations": [
            { "first_person_attack_rotation": "!q.is_item_equipped" },
            { "first_person_attack_rotation_bow": "q.get_equipped_item_name == 'bow'" },
            { "first_person_attack_rotation_spyglass": "q.get_equipped_item_name == 'spyglass'" },
            { "first_person_attack_rotation_shield": "q.get_equipped_item_name == 'shield'" },
            { "first_person_attack_rotation_trident": "q.get_equipped_item_name == 'trident'" }, // && v.item_use_normalized <= 0.0f - it looks better the other way imo
            { "first_person_attack_rotation_crossbow": "q.get_equipped_item_name == 'crossbow'" } // && v.item_use_normalized <= 0.0f
          ]
        }
      }
    },
    "controller.animation.player.crossbow": {
      "initial_state": "default",
      "states": {
        "default": {
          "transitions": [
            { "hold": "q.item_is_charged" },
            { "charge": "v.item_use_normalized > 0.0f" }
          ]
        },
        "charge": {
          "animations": [
            "third_person_crossbow_equipped"
          ],
          "transitions": [
            { "default": "q.get_equipped_item_name != 'crossbow' || (v.item_use_normalized <= 0.0f && !q.item_is_charged)" },
            { "hold": "q.item_is_charged" }
          ]
        },
        "hold": {
          "animations": [
            { "crossbow_hold": "!q.is_swimming && v.attack_time <= 0.0f" }
          ],
          "transitions": [
            { "default": "q.get_equipped_item_name != 'crossbow' || (v.item_use_normalized <= 0.0f && !q.item_is_charged)" },
            { "charge": "v.item_use_normalized > 0.0f" }
          ]
        }
      }
    },
    "controller.animation.player.first_person_map" : {
      "initial_state" : "default",
      "states" : {
        "default" : {
          "transitions" : [
            { "one_hand": "q.get_equipped_item_name(1) == 'filled_map' || q.get_equipped_item_name(1) == 'shield'" },
            { "two_hand": "q.get_equipped_item_name(1) != 'filled_map' && q.get_equipped_item_name(1) != 'shield'" }
          ]
        },
        "one_hand": {
          "animations": [
            { "first_person_map_hold_main_hand" : "q.get_equipped_item_name(0, 1) == 'filled_map'" },
            { "first_person_map_hold_off_hand" : "q.get_equipped_item_name(1) == 'filled_map' && (q.get_equipped_item_name == 'bow' || q.get_equipped_item_name == 'crossbow' ? v.item_use_normalized <= 0.0f && !q.item_is_charged : 1.0)" }
          ],
          "transitions": [
            { "default": "q.get_equipped_item_name(0, 1) != 'filled_map' && q.get_equipped_item_name(1) != 'filled_map'" },
            { "two_hand": "q.get_equipped_item_name(1) != 'filled_map' && q.get_equipped_item_name(1) != 'shield'" }
          ]
        },
        "two_hand": {
          "animations": [
            "first_person_map_hold",
            "first_person_map_hold_attack"
          ],
          "transitions": [
            { "default": "q.get_equipped_item_name(0, 1) != 'filled_map' && q.get_equipped_item_name(1) != 'filled_map'" },
            { "one_hand": "q.get_equipped_item_name(1) == 'filled_map' || q.get_equipped_item_name(1) == 'shield'" }
          ]
        }
      }
    },
    "controller.animation.player.root": {
      "initial_state": "first_person",
      "states": {
        "first_person": {
          "animations": [
            "first_person_base_pose",
            "first_person_swap_item",
            { "first_person_attack_controller": "v.attack_time > 0.0f && q.get_equipped_item_name != 'filled_map'" },
            { "first_person_empty_hand": "!v.is_holding_right" },
            { "first_person_map_controller": "q.get_equipped_item_name == 'filled_map' || q.get_equipped_item_name(1) == 'filled_map'" }
            //{ "first_person_crossbow_equipped": "q.get_equipped_item_name == 'crossbow' && (v.item_use_normalized > 0.0f && v.item_use_normalized < 1.0f)" }
          ],
          "transitions": [
            { "map_player": "v.map_face_icon" },
            { "third_person": "!v.is_first_person" }
          ]
        },
        "map_player": {
          "transitions": [
            { "first_person": "v.is_first_person" },
            { "third_person": "!v.is_first_person && !v.map_face_icon" }
          ]
        },
        "third_person": {
          "animations": [
            "humanoid_base_pose",
            { "damage_nearby_mobs" : "v.damage_nearby_mobs" },
            //{ "brandish_spear" : "v.is_brandishing_spear" },
            //{ "holding_spyglass": "v.is_holding_spyglass" },

            { "look_at_target": "!q.is_sleeping && !q.is_emoting" },
            { "move.arms": "!(q.get_equipped_item_name == 'bow' && v.item_use_normalized > 0.0f) && (!(q.get_equipped_item_name == 'crossbow' && (q.item_is_charged || v.item_use_normalized > 0.0f)) || (q.get_equipped_item_name == 'crossbow' && q.item_is_charged && v.attack_time > 0.0f))" },
            "move.legs",
            "cape",
            { "riding.arms": "q.is_riding && !(q.get_equipped_item_name == 'bow' && v.item_use_normalized > 0.0f) && (!(q.get_equipped_item_name == 'crossbow' && (q.item_is_charged || v.item_use_normalized > 0.0f)) || (q.get_equipped_item_name == 'crossbow' && q.item_is_charged && v.attack_time > 0.0f))" },
            { "riding.legs": "q.is_riding" },
            "holding",
            { "bob": "!v.is_in_menu && !v.is_holding_spyglass && !v.is_tooting_goat_horn && !v.is_using_brush && (v.swim_amount <= 0.0)" },
            { "sneaking": "q.is_sneaking && !q.is_sleeping" },
            { "sleeping": "q.is_sleeping && q.is_alive" },
            "swim_and_crawl_controller",
            { "attack.rotations": "v.attack_time > 0.0" },
            { "shield_block_main_hand": "q.blocking && q.get_equipped_item_name(1) != 'shield' && q.get_equipped_item_name == 'shield'" },
            { "shield_block_off_hand": "q.blocking && q.get_equipped_item_name(1) == 'shield' && v.item_use_normalized <= 0.0f && !q.item_is_charged" },
            { "crossbow_controller": "q.get_equipped_item_name == 'crossbow'" },
            { "third_person_bow_equipped": "q.get_equipped_item_name == 'bow'" },
            { "fire": "q.is_alive && q.is_on_fire" },
            { "scoping_spyglass": "q.get_equipped_item_name == 'spyglass' && v.item_use_normalized > 0.0f" },
            { "charging_trident": "q.get_equipped_item_name == 'trident' && v.item_use_normalized > 0.0f" },
            { "menu_pose": "v.is_in_menu" },
            { "tooting_goat_horn": "v.is_tooting_goat_horn" },
            { "holding_brush": "q.get_equipped_item_name == 'brush'" },
            { "brushing": "v.is_using_brush" }
          ],
          "transitions": [
            { "first_person": "v.is_first_person" },
            { "map_player": "v.map_face_icon" }
          ]
        }
      }
    }
  }
}