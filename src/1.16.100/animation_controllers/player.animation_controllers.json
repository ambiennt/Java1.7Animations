{
  "format_version": "1.10.0",
  "animation_controllers": {
    "controller.animation.player.crossbow": {
      "initial_state": "default",
      "states": {
        "default": {
          "animations": [
            "crossbow_rightitem_uncharged"
          ],
          "transitions": [
            { "hold": "query.item_is_charged" },
            { "charge": "variable.item_use_normalized > 0.0f" }
          ]
        },
        "charge": {
          "animations": [
            "crossbow_rightitem_uncharged",
            "third_person_crossbow_equipped"
          ],
          "transitions": [
            { "default": "query.get_equipped_item_name != 'crossbow' || (variable.item_use_normalized <= 0.0f && !query.item_is_charged)" },
            { "hold": "query.item_is_charged" }
          ]
        },
        "hold": {
          "animations": [
            { "crossbow_hold": "!query.is_swimming && variable.attack_time <= 0.0f" }
          ],
          "transitions": [
            { "default": "query.get_equipped_item_name != 'crossbow' || (variable.item_use_normalized <= 0.0f && !query.item_is_charged)" },
            { "charge": "variable.item_use_normalized > 0.0f" }
          ]
        }
      }
    },
    "controller.animation.player.first_person_map" : {
      "initial_state" : "default",
      "states" : {
        "default" : {
          "transitions" : [
            { "one_hand": "query.get_equipped_item_name(1) == 'filled_map' || query.get_equipped_item_name(1) == 'shield'" },
            { "two_hand": "query.get_equipped_item_name(1) != 'filled_map' && query.get_equipped_item_name(1) != 'shield'" }
          ]
        },
        "one_hand": {
          "animations": [
            { "first_person_map_hold_main_hand" : "query.get_equipped_item_name(0, 1) == 'filled_map'" },
            { "first_person_map_hold_off_hand" : "query.get_equipped_item_name(1) == 'filled_map' && (query.get_equipped_item_name == 'bow' || query.get_equipped_item_name == 'crossbow' ? variable.item_use_normalized <= 0.0f && !query.item_is_charged : 1.0)" }
          ],
          "transitions": [
            { "default": "query.get_equipped_item_name(0, 1) != 'filled_map' && query.get_equipped_item_name(1) != 'filled_map'" },
            { "two_hand": "query.get_equipped_item_name(1) != 'filled_map' && query.get_equipped_item_name(1) != 'shield'" }
          ]
        },
        "two_hand": {
          "animations": [
            "first_person_map_hold",
            "first_person_map_hold_attack"
          ],
          "transitions": [
            { "default": "query.get_equipped_item_name(0, 1) != 'filled_map' && query.get_equipped_item_name(1) != 'filled_map'" },
            { "one_hand": "query.get_equipped_item_name(1) == 'filled_map' || query.get_equipped_item_name(1) == 'shield'" }
          ]
        }
      }
    },
    "controller.animation.player.root": {
      "initial_state": "first_person",
      "states": {
        "first_person": {
          "animations": [
            "first_person_swap_item",
            { "first_person_attack_rotation": "variable.attack_time > 0.0f && query.get_equipped_item_name != 'filled_map'" },
            { "first_person_empty_hand": "!variable.is_holding_right" },
            { "first_person_map_controller": "query.get_equipped_item_name == 'filled_map' || query.get_equipped_item_name(1) == 'filled_map'" },
            { "first_person_crossbow_equipped": "query.get_equipped_item_name == 'crossbow' && (variable.item_use_normalized > 0.0f && variable.item_use_normalized < 1.0f)" }
          ],
          "transitions": [
            { "map_player": "variable.map_face_icon" },
            { "third_person": "!variable.is_first_person" }
          ]
        },
        "map_player": {
          "transitions": [
            { "first_person": "variable.is_first_person" },
            { "third_person": "!variable.is_first_person && !variable.map_face_icon" }
          ]
        },
        "third_person": {
          "animations": [
            { "move.arms": "!(query.get_equipped_item_name == 'bow' && variable.item_use_normalized > 0.0f) && (!(query.get_equipped_item_name == 'crossbow' && (query.item_is_charged || variable.item_use_normalized > 0.0f)) || (query.get_equipped_item_name == 'crossbow' && query.item_is_charged && variable.attack_time > 0.0f))" },
            "move.legs",
            "cape",
            "holding",
            "bob",
            { "look_at_target": "!query.is_sleeping && !query.is_emoting" },
            { "riding.arms": "query.is_riding && !(query.get_equipped_item_name == 'bow' && variable.item_use_normalized > 0.0f) && (!(query.get_equipped_item_name == 'crossbow' && (query.item_is_charged || variable.item_use_normalized > 0.0f)) || (query.get_equipped_item_name == 'crossbow' && query.item_is_charged && variable.attack_time > 0.0f))" },
            { "riding.legs": "query.is_riding" },
            //{ "sneaking": "query.is_sneaking && !query.is_sleeping && !variable.sword_equipped" },
            { "sneaking": "query.is_sneaking && !query.is_sleeping" },
            { "sleeping": "query.is_sleeping && query.is_alive" },
            { "swimming_controller": "variable.swim_amount > 0.0f" },
            { "attack.rotations": "variable.attack_time > 0.0f" },
            { "shield_block_main_hand": "query.is_sneaking && query.get_equipped_item_name(1) != 'shield' && query.get_equipped_item_name == 'shield'" },
            { "shield_block_off_hand": "query.is_sneaking && query.get_equipped_item_name(1) == 'shield' && variable.item_use_normalized <= 0.0f && !query.item_is_charged" },
            { "crossbow_controller": "query.get_equipped_item_name == 'crossbow'" },
            { "third_person_bow_equipped": "query.get_equipped_item_name == 'bow'" },
            { "fire": "query.is_alive && query.is_on_fire" },
            //{ "sword_blocking": "query.is_sneaking && variable.sword_equipped" }

            { "charging_trident": "query.get_equipped_item_name == 'trident' && variable.item_use_normalized > 0.0f" }
          ],
          "transitions": [
            { "first_person": "variable.is_first_person" },
            { "map_player": "variable.map_face_icon" }
          ]
        }
      }
    }
  }
}